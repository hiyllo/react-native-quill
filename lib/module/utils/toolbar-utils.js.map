{"version":3,"sources":["toolbar-utils.ts"],"names":["formats","formatType","formatValueType","icons","defaultIcons","getFontName","getToolbarData","options","customIcons","defaultFontFamily","iconSet","isSingle","length","Array","isArray","set","createToolSet","push","i","opt","console","log","tools","ic","format","find","f","name","type","toggle","formatIcon","source","valueOff","valueOn","keys","Object","values","j","key","value","listItems","allowCustoms","map","v","def","defaults","text","filter","indexOf","select","x","icon","undefined","color","fIcon"],"mappings":"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","sourcesContent":["import { formats, formatType, formatValueType } from '../constants/formats';\nimport type {\n  ColorListData,\n  formatDefault,\n  TextListData,\n  ToggleData,\n} from '../types';\nimport { icons as defaultIcons } from '../constants/icons';\nimport { getFontName } from './editor-utils';\n\nexport const getToolbarData = (\n  options: Array<Array<string | object> | string | object>,\n  customIcons?: Record<string, any>,\n  defaultFontFamily?: string\n): Array<Array<ToggleData | TextListData | ColorListData>> => {\n  let iconSet: Array<Array<ToggleData | TextListData | ColorListData>> = [];\n  const icons = customIcons\n    ? { ...defaultIcons, ...customIcons }\n    : defaultIcons;\n\n  const isSingle: boolean = !(options.length > 0 && Array.isArray(options[0]));\n  if (isSingle) {\n    const set = createToolSet(options, icons);\n    iconSet.push(set);\n  } else {\n    for (let i = 0; i < options.length; i++) {\n      const opt = options[i];\n      if (Array.isArray(opt)) {\n        const set = createToolSet(opt, icons, defaultFontFamily);\n        iconSet.push(set);\n      } else\n        console.log(opt, 'is not an array, you should pass it as an array');\n    }\n  }\n\n  return iconSet;\n};\n\nconst createToolSet = (\n  tools: Array<string | object>,\n  icons: Record<string, any>,\n  defaultFontFamily?: string\n): Array<ToggleData | TextListData | ColorListData> => {\n  let ic: Array<ToggleData | TextListData | ColorListData> = [];\n  for (let i = 0; i < tools.length; i++) {\n    const opt = tools[i];\n\n    if (typeof opt === 'string') {\n      const format = formats.find((f) => f.name === opt);\n      if ((format && format.type === formatType.toggle) || !format) {\n        const formatIcon = icons[opt];\n        if (formatIcon) {\n          ic.push({\n            name: opt,\n            source: formatIcon,\n            valueOff: false,\n            valueOn: true,\n            type: formatType.toggle,\n          } as ToggleData);\n        } else {\n          ic.push({\n            name: opt,\n            valueOff: false,\n            valueOn: true,\n            type: formatType.toggle,\n          } as ToggleData);\n        }\n      }\n    } else if (typeof opt === 'object' && opt !== null) {\n      const keys = Object.keys(opt);\n      const values = Object.values(opt);\n      for (let j = 0; j < keys.length; j++) {\n        const key = keys[j];\n        const value = values[j];\n        const format = formats.find((f) => f.name === key);\n        if (typeof value === 'string' || typeof value === 'number') {\n          const formatIcon = icons[key][value];\n          if (formatIcon) {\n            ic.push({\n              name: key,\n              source: formatIcon,\n              valueOff: false,\n              valueOn: value,\n              type: formatType.toggle,\n            } as ToggleData);\n          } else {\n            ic.push({\n              name: key,\n              valueOff: false,\n              valueOn: value,\n              type: formatType.toggle,\n            } as ToggleData);\n          }\n        } else if (Array.isArray(value)) {\n          const formatIcon = icons[key];\n          let listItems: formatDefault[] = [];\n          if ((!format || format.allowCustoms === true) && value.length > 0) {\n            listItems = value.map((v) => {\n              let def = format?.defaults?.find(\n                (f) => f.value === (v !== '' ? v : false)\n              );\n              if (key === 'font' && defaultFontFamily && def?.value === false) {\n                def.name = defaultFontFamily;\n              }\n              return def\n                ? def\n                : ({\n                    name: v,\n                    value:\n                      key === 'font' && v !== false && v !== ''\n                        ? getFontName(v)\n                        : v,\n                    type: formatValueType.text,\n                  } as formatDefault);\n            });\n          } else if (format?.defaults && value.length === 0) {\n            listItems = format.defaults;\n          } else if (format?.defaults && value.length > 0) {\n            listItems = format.defaults.filter(\n              (f) => value.indexOf(f.value) !== -1\n            );\n          }\n          if (listItems.length > 0) {\n            if (!format || format.type === formatType.select) {\n              ic.push({\n                name: key,\n                values: listItems.map((x) => {\n                  let icon =\n                    x.type === formatValueType.icon\n                      ? x.value === false\n                        ? icons[key]['']\n                        : typeof x.value === 'string'\n                        ? icons[key][x.value]\n                        : undefined\n                      : undefined;\n\n                  return {\n                    name: x.name,\n                    valueOff: false,\n                    valueOn: x.value,\n                    source: icon,\n                    type: (\n                      x.type === formatValueType.icon && icon ? true : false\n                    )\n                      ? formatType.icon\n                      : formatType.toggle,\n                  } as ToggleData;\n                }),\n                type: formatType.select,\n              } as TextListData);\n            } else {\n              ic.push({\n                name: key,\n                source: formatIcon,\n                values: listItems.map(\n                  (x) =>\n                    ({\n                      name: x.name,\n                      valueOff: false,\n                      valueOn: x.value,\n                      type: formatType.color,\n                    } as ToggleData)\n                ),\n                type: formatType.color,\n              } as ColorListData);\n            }\n          } else {\n            const fIcon = icons[key];\n            if (fIcon) {\n              ic.push({\n                name: key,\n                source: fIcon,\n                valueOff: false,\n                valueOn: true,\n                type: formatType.toggle,\n              } as ToggleData);\n            }\n          }\n        }\n      }\n    }\n  }\n  return ic;\n};\n"]}